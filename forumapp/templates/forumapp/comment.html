{% extends 'base.html' %}
{% load commenthelpers %}
{% block content %}
<p><button type="button" class="button float-right radius" data-open="newComment">Create a new comment</button></p>
{% if comment_list.0.thread.owner.username == user.get_username or perms.forumapp.delete_thread %}
  <form action="?" method="post">
    {% csrf_token %}
    <p><input type="submit" class="alert button float-right radius" value="Delete this thread" name="delete"></p>
  </form>
{% endif %}

{% if comment_list %}
    <ul>
    {% for comment in comment_list|dictsortreversed:'pub_date' %}
        <li>
            {{ comment.text }} by {{comment.owner}}
            at {{comment.pub_date|date:"g:i"}}
            {% if not comment|isrecent  %}
                  on {{comment.pub_date|date:"D, d M, Y"}}
            {% endif %}
        </li>
    {% endfor %}
    </ul>
{% else %}
    <p>No comments are available.</p>
{% endif %}

<div class="reveal" id="newComment" data-reveal>
	<h3>Create a new comment:</h3>
	<form action="?" method="post">
		{% csrf_token %}
	  	{{ form }}
		<input type="submit" class="success button float-right radius" value="Create Comment" name="create">
	</form>
	<button type="button" class="close-button radius" data-close aria-label="Close modal">
		<span aria-hidden="true">&times;</span>
	</button>
</div>
{% endblock %}

{% extends 'base.html' %}
{% load user_helpers %}
{% block content %}
<h2>User profile for {{ object.get_username }}</h2>

<p>Last login: {{ object.last_login }}</p>

<form action="#" method="post">
  {% csrf_token %}
  {% if request.user.is_staff and request.user != object %}
    {% if object.is_active %}
      <input type="submit" class="alert button radius" value="Ban this user" name="admin_ban">
    {% else %}
      <input type="submit" class="alert button radius" value="Unban this user" name="admin_unban">
    {% endif %}
  {% endif %}
  {% if request.user|get_owned_channels_minus_banned:object %}
    <h3>Ban from your channels</h3>
    {% for channel in request.user|get_owned_channels_minus_banned:object %}
      <input type="submit" class="tiny alert button radius" value="{{ channel }}" name="owner_ban">
    {% endfor %}
  {% endif %}
  {% if request.user|get_owned_channels_only_banned:object %}
    <h3>Unban from your channels</h3>
    {% for channel in request.user|get_owned_channels_only_banned:object %}
      <input type="submit" class="tiny alert button radius" value="{{ channel }}" name="owner_unban">
    {% endfor %}
  {% endif %}
  {% if request.user|get_moderated_channels_minus_banned:object %}
    <h3>Ban from channels you moderate</h3>
    {% for channel in request.user|get_moderated_channels_minus_banned:object %}
      <input type="submit" class="tiny alert button radius" value="{{ channel }}" name="moderator_ban">
    {% endfor %}
  {% endif %}
  {% if request.user|get_moderated_channels_only_banned:object %}
    <h3>Unban from channels you moderate</h3>
    {% for channel in request.user|get_moderated_channels_only_banned:object %}
      <input type="submit" class="tiny alert button radius" value="{{ channel }}" name="moderator_unban">
    {% endfor %}
  {% endif %}
</form>
{% endblock %}

{% extends 'base.html' %}
{% block content %}
<div class="row">
  <p><button type="button" class="button float-left radius" data-open="newThread">Create a new thread</button></p>
  <!-- TODO: fix this so that we can check the owner even if thread_list is empty -->
  {% if thread_list.0.channel.owner.username == user.get_username or perms.forumapp.delete_channel %}
    <form action="?" method="post">
      {% csrf_token %}
      <p><input type="submit" class="alert button float-right radius" value="Delete this channel" name="delete"></p>
    </form>
  {% endif %}

  {% if thread_list %}
      {% for thread in thread_list %}
          {% include "forumapp/thread_listing.html" %}
      {% endfor %}
  {% else %}
      <p>No threads are available.</p>
  {% endif %}
</div>

<div class="reveal" id="newThread" data-reveal>
	<h3>Create a new thread:</h3>
	<form action="?" method="post">
		{% csrf_token %}
	  	{{ form }}
		<input type="submit" class="success button float-right radius" value="Create Thread" name="create">
	</form>
	<button type="button" class="close-button radius" data-close aria-label="Close modal">
		<span aria-hidden="true">&times;</span>
	</button>
</div>
{% endblock %}

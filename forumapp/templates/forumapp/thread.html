{% extends 'base.html' %}
{% load thread_helpers %}
{% load user_helpers %}
{% block content %}

<form action="#" method="post">
  {% csrf_token %}
  <input type="submit" class="primary button radius" value="Back to channels" name="back">
  <button type="button" class="button float-left radius" data-reveal-id="newThread">Create a new thread</button>
  {% if view.kwargs.channel|is_owned_by:user.get_username or perms.forumapp.delete_channel %}
    <input type="submit" class="alert button float-right radius" value="Delete this channel" name="delete">
  {% endif %}
</form>
{% if request.user|is_banned_from:view.kwargs.channel %}
  <p>Sorry, this channel is unavailable.</p>
{% else %}
  <h2>{{ view.kwargs.channel }} </h2>
  <h4>{{ view.kwargs.channel|description }}</h4>
  {% for listing in thread_list %}
    {% include "forumapp/thread_listing.html" %}
  {% empty %}
    <p>No threads are available.</p>
  {% endfor %}
{% endif %}

<div class="reveal-modal" id="newThread" data-reveal>
	<h3>Create a new thread:</h3>
	<form action="#" method="post">
		{% csrf_token %}
	  	{{ form }}
		<input type="submit" class="success button float-right radius" value="Create Thread" name="create">
	</form>
  {% include "forumapp/messages.html" %}
	<a class="close-reveal-modal radius" aria-label="Close">&#215;</a>
</div>
{% endblock %}
